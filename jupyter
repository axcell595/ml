import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Load dataset
df = pd.read_csv("Mental_Health_and_Social_Media_Balance_Dataset.csv")

# Convert relevant columns to numeric (ignore text like 'U001')
for col in ['Days_Without_Social_Media', 'Sleep_Quality(1-10)', 'Stress_Level(1-10)']:
    df[col] = pd.to_numeric(df[col], errors='coerce')

# Drop any rows with missing numeric values
df = df.dropna(subset=['Days_Without_Social_Media', 'Sleep_Quality(1-10)', 'Stress_Level(1-10)'])

# Aggregate duplicates properly
stress = df.pivot_table(
    index='Days_Without_Social_Media',
    columns='Sleep_Quality(1-10)',
    values='Stress_Level(1-10)',
    aggfunc='mean'
)

# Plot the heatmap
plt.figure(figsize=(9,6))
sns.heatmap(stress, annot=True, fmt=".1f", cmap="coolwarm")
plt.title("Stress Level vs Days Without Social Media and Sleep Quality")
plt.show()
